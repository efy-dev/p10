<?xml version="1.0" encoding="UTF-8"?>


<!--用户-->
<module name="order2" label="系统-订单" version="" package="com.yuepaila.order" path="">

    <entities>

        <entity name="PurchaseOrder" label="订单"
                basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.PurchaseOrder">
            <fields>

                <field name="ptype" label="订单类型" inputType="select_status" dataType="int" key="PurchaseOrder.ptype">
                    <statusType fieldName="ptype">
                        <item label="个人写真" value="1"></item>
                        <item label="婚纱摄影" value="2"></item>
                        <item label="母婴-孕妇照" value="111"></item>
                        <item label="母婴-百天照" value="112"></item>
                        <item label="母婴-儿童照" value="113"></item>
                        <item label="形象-证件照" value="211"></item>
                        <item label="形象-职场照" value="212"></item>
                        <item label="形象-商务肖像照" value="213"></item>
                        <item label="婚礼跟拍" value="311"></item>
                        <item label="旅游跟拍" value="312"></item>
                        <item label="会议跟拍" value="313"></item>
                    </statusType>
                </field>
                <field name="theStatus" label="支付状态" inputType="select_status" key="PurchaseOrder.theStatus"
                       dataType="int">
                    <statusType fieldName="theStatus">
                        <item label="删除" value="0"></item>
                        <item label="未支付" value="1"></item>
                        <item label="已付定金" value="2"></item>
                        <item label="已付清" value="3"></item>
                    </statusType>
                </field>

                <field name="processStatus" label="进程状态" inputType="select_status" key="PurchaseOrder.processStatus"
                       dataType="int">
                    <statusType fieldName="processStatus">
                        <item label="待确认" value="1"></item>
                        <item label="已确认未拍摄" value="2"></item>
                        <item label="已拍摄未洗片" value="3"></item>
                        <item label="已洗片未确认" value="4"></item>
                        <item label="已确认未装框" value="5"></item>
                        <item label="已装框未发货" value="6"></item>
                        <item label="已发货" value="7"></item>
                        <item label="已确认" value="8"></item>
                    </statusType>
                </field>

                <field name="orderType" label="订单类型" dataType="int" inputType="select_status"
                       key="PurchaseOrder.orderType">
                    <statusType fieldName="orderType">
                        <item label="DIY" value="1"></item>
                        <item label="套餐" value="2"></item>
                        <item label="私人定制" value="3"></item>
                    </statusType>
                </field>
                <field name="needCar" label="是否需要接送" dataType="boolean" inputType="radio_status"
                       key="PurchaseOrder.needCar">
                    <statusType fieldName="needCar">
                        <item value="true" label="专车"></item>
                        <item value="false" label="自驾"></item>
                    </statusType>
                </field>
                <field name="photographer.id" name2="photographer.name" label="摄影师" inputType="dialog_do"
                       key="PurchaseOrder.photographer" reference="User"/>
                <field name="photographer2.id" label="摄影师" inputType="dialog_do" key="PurchaseOrder.photographer2"
                       reference="Photographer"/>
                <field name="consumer.id" name2="consumer.name" label="消费者" inputType="dialog_do"
                       key="PurchaseOrder.consumer" reference="User"/>
                <field name="consumer2.id" label="消费者" inputType="dialog_do" key="PurchaseOrder.consumer2"
                       reference="Consumer"/>
                <field name="agent.id" name2="agent.name" label="经纪人" inputType="dialog_do" key="PurchaseOrder.agent"
                       reference="User"/>
                <field name="agent2.id" label="经纪人" inputType="dialog_do" key="PurchaseOrder.agent2" reference="Agent"/>
                <field name="dresser.id" name2="dresser.name" label="化妆师" inputType="dialog_do"
                       key="PurchaseOrder.dresser" reference="User"/>
                <field name="dresser2.id" label="化妆师" inputType="dialog_do" key="PurchaseOrder.dresser2"
                       reference="Dresser"/>
                <field name="fixer.id" label="修片师" inputType="dialog_do" key="PurchaseOrder.fixer" reference="User"/>
                <field name="designer.id" label="修片师" inputType="dialog_do" key="PurchaseOrder.designer"
                       reference="User"/>
                <field name="total" label="总价" inputType="text" dataType="BigDecimal"/>
                <field name="serial" label="订单序列号" inputType="text"/>
                <field name="shotTime" label="拍摄周期" dataType="int" inputType="text"/>
                <field name="originalPhotoNumber" label="原片数量" dataType="int" inputType="text"/>
                <field name="fixedPhotoNumber" label="精修片" dataType="int" inputType="text"/>
                <field name="purchaseOrderDelivery.id" label="寄送信息" inputType="dialog_do"
                       key="PurchaseOrder.purchaseOrderDelivery" reference="PurchaseOrderDelivery"/>
                <field name="createDatetime" label="下单时间" inputType="default" dataType="datetime"/>
                <field name="fatherPurchaseOrder.id" label="父订单" inputType="dialog_pop"
                       key="PurchaseOrder.fatherPurchaseOrder" reference="PurchaseOrder"></field>
                <field name="customization.id" label="私人定制" inputType="dialog_do" key="PurchaseOrder.customization"
                       reference="Customization"></field>

            </fields>
            <does>
                <do name="plistPurchaseOrder"
                    label="订单审核"
                    result="/manage/order/purchaseOrderList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition label="城市" name="consumer.cityId" defaultValue="${MY_CITY}"
                                   inputType="default" operation="eq"/>
                        <condition name="processStatus" label="进度" defaultValue="1" operation="eq"
                                   dataType="int"></condition>
                        <condition label="支付状态" name="theStatus" defaultValue="0" operation="gt"
                                   inputType="default" dataType="int"/>
                    </query>

                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition label="城市" name="consumer.cityId" defaultValue="${MY_CITY}"
                                   inputType="default" operation="eq"/>
                        <condition name="processStatus" label="进度" defaultValue="1" operation="eq" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>


                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="processStatus" label="进度" defaultValue="1" operation="eq" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt" inputType="default"
                                   dataType="int"/>
                        <condition label="城市" name="consumer.cityId" inputType="dialog_pop" operation="eq" defaultValue="${MY_CITY}"
                                   key="city"/>
                        <condition name="ptype" label="拍摄类型" inputType="select_status" operation="eq" dataType="int"
                                   defaultValue="" key="PurchaseOrder.ptype"/>
                        <condition label="支付状态" name="theStatus" defaultValue="" dataType="int" inputType="select_status"
                                   operation="eq"></condition>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>

                    <query name="user" label="用户查询" orderBy="id:desc">
                        <condition name="processStatus" label="进度" defaultValue="1" operation="eq" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt" inputType="default"
                                   dataType="int"/>
                        <condition label="城市" name="consumer.cityId" defaultValue="${MY_CITY}"
                                   inputType="default" operation="eq"/>
                        <condition label="摄影师" name="photographer.name" defaultValue="" operation="like"></condition>
                        <condition label="经纪人" name="agent.name" defaultValue="" operation="like"></condition>
                        <condition label="化妆师" name="dresser.name" defaultValue="" operation="like"></condition>
                        <condition label="消费者" name="consumer.name" defaultValue="" operation="like"></condition>
                    </query>
                </do>

                <do name="plistConfirmPurchaseOrder"
                    label="订单审核"
                    result="/manage/order/purchaseOrderList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="processStatus" label="进度" defaultValue="1" operation="gt"
                                   dataType="int"></condition>
                        <condition name="photographer.cityId" label="城市" defaultValue="${MY_CITY}" operation="eq"/>
                        <condition label="支付状态" name="theStatus" defaultValue="0" operation="gt"
                                   inputType="default" dataType="int"/>
                    </query>

                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition label="城市" name="consumer.cityId" defaultValue="${MY_CITY}"
                                   inputType="default" operation="eq"/>
                        <condition name="processStatus" label="进度" defaultValue="1" operation="gt" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>


                    <query name="advance" label="分类查找" orderBy="createDatetime:desc">
                        <condition name="processStatus" label="进度" defaultValue="1" operation="gt" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition name="ptype" label="拍摄类型" inputType="select_status" operation="eq" dataType="int"
                                   defaultValue="" key="PurchaseOrder.ptype"/>
                        <condition label="支付状态" name="theStatus" defaultValue="" dataType="int" inputType="select_status"
                                   operation="eq"></condition>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>
                    <query name="user" label="用户查询" orderBy="id:desc">
                        <condition name="processStatus" label="进度" defaultValue="1" operation="eq" dataType="int"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="gt" inputType="default"
                                   dataType="int"/>
                        <condition label="摄影师" name="photographer.name" defaultValue="" operation="like"></condition>
                        <condition label="经纪人" name="agent.name" defaultValue="" operation="like"></condition>
                        <condition label="化妆师" name="dresser.name" defaultValue="" operation="like"></condition>
                        <condition label="消费者" name="consumer.name" defaultValue="" operation="like"></condition>
                    </query>
                </do>

                <do name="plistAgentPurchaseOrder" label="我的订单" result="/manage/order/purchaseOrderList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="photographer2.agent.id" label="经纪人" defaultValue="${MY_USER}" operation="eq"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                    </query>
                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition name="photographer2.agent.id" label="经纪人" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>
                    <query name="type" label="类型查询" orderBy="id:desc">
                        <condition name="photographer2.agent.id" label="经纪人" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单类型" name="ptype" inputType="select_status" operation="eq" dataType="int"/>
                    </query>

                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="photographer2.agent.id" label="经纪人" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>
                </do>
                <do name="plistDresserPurchaseOrder" label="化妆师订单" result="/manage/order/purchaseOrderList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="dresser.id" label="化妆师" defaultValue="${MY_USER}" operation="eq"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                    </query>
                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition name="dresser.id" label="化妆师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>
                    <query name="type" label="类型查询" orderBy="id:desc">
                        <condition name="dresser.id" label="化妆师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单类型" name="ptype" inputType="select_status" operation="eq" dataType="int"/>
                    </query>

                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="dresser.id" label="化妆师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>
                </do>
                <do name="plistPhotographerPurchaseOrder" label="我的订单" result="/manage/order/purchaseOrderList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="photographer.id" label="摄影师" defaultValue="" operation="eq"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                    </query>

                </do>
                <do name="plistProviderPurchaseOrder" label="供应商订单" result="/manage/order/purchaseOrderList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="purchaseOrderDelivery.photoFrameProvider.id" label="供应商"
                                   defaultValue="${MY_USER}" operation="eq"/>
                        <condition label="状态类型" name="theStatus" defaultValue="1" operation="eq" inputType="default"
                                   dataType="int"/>
                    </query>
                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition name="purchaseOrderDelivery.photoFrameProvider.id" label="供应商"
                                   defaultValue="${MY_USER}" operation="eq" inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>
                    <query name="type" label="类型查询" orderBy="id:desc">
                        <condition name="purchaseOrderDelivery.photoFrameProvider.id" label="供应商"
                                   defaultValue="${MY_USER}" operation="eq" inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition name="ptype" label="订单类型" inputType="select_status" operation="eq" dataType="int"
                                   defaultValue="" key="PurchaseOrder.ptype"/>
                    </query>

                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="purchaseOrderDelivery.photoFrameProvider.id" label="供应商"
                                   defaultValue="${MY_USER}" operation="eq" inputType="default"/>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>


                </do>
                <do name="plistFixerPurchaseOrder" label="修片师订单" result="/manage/order/purchaseOrderList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="fixer.id" label="修片师" defaultValue="${MY_USER}" operation="eq"></condition>
                        <condition name="theStatus" label="状态" defaultValue="1" operation="eq"
                                   dataType="int"></condition>
                    </query>
                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition name="fixer.id" label="修片师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>
                    <query name="type" label="类型查询" orderBy="id:desc">
                        <condition name="fixer.id" label="修片师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition name="ptype" label="订单类型" inputType="select_status" operation="eq" dataType="int"
                                   defaultValue="" key="PurchaseOrder.ptype"/>
                    </query>

                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="fixer.id" label="修片师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>
                </do>
                <do name="plistDesignerPurchaseOrder" label="排版师订单" result="/manage/order/designerPurchaseOrderList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="designer.id" label="排版师" defaultValue="${MY_USER}" operation="eq"></condition>
                        <condition name="theStatus" label="状态" defaultValue="1" operation="eq"
                                   dataType="int"></condition>
                    </query>
                    <query name="basic" label="快速查找" orderBy="id:desc">
                        <condition name="designer.id" label="排版师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="订单序列号" name="serial" inputType="text" operation="eq" dataType="default"/>
                    </query>
                    <query name="type" label="类型查询" orderBy="id:desc">
                        <condition name="designer.id" label="排版师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition name="ptype" label="订单类型" inputType="select_status" operation="eq" dataType="int"
                                   defaultValue="" key="PurchaseOrder.ptype"/>
                    </query>

                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="designer.id" label="排版师" defaultValue="${MY_USER}" operation="eq"
                                   inputType="default"></condition>
                        <condition label="状态类型" name="theStatus" defaultValue="0" operation="ne"
                                   inputType="default" dataType="int"/>
                        <condition label="城市" name="photographer.cityId" defaultValue="${MY_CITY}"
                                   inputType="dialog_pop" operation="eq" key="city"/>
                        <condition label="起始时间" name="createDatetime" inputType="date" dataType="datetime"
                                   operation="gt"/>
                        <condition label="截止时间" name="createDatetime2" inputType="date" dataType="datetime"
                                   operation="lt"/>
                    </query>
                </do>
                <do name="formPurchaseOrder" label="修改" access="edit" result="/manage/order/purchaseOrderForm"></do>
                <do name="saveOrUpdatePurchaseOrder" label="保存"
                    execute="com.yuepaila.order.controller.PurchaseOrderHandler"
                    result="redirect:/basic/xm.do?qm=plistPurchaseOrder_default">
                    <page>
                        <fields>
                            <field name="theStatus" label="" inputType="default" dataType="int"
                                   defaultValue="1"></field>
                            <field name="processStatus" label="" inputType="default" dataType="int"
                                   defaultValue="1"></field>
                            <field name="ptype" label="" inputType="default" dataType="int" defaultValue="1"></field>
                            <field name="shotTime" label="" inputType="default" dataType="int" defaultValue="1"></field>
                            <field name="originalPhotoNumber" label="" inputType="default" dataType="int"
                                   defaultValue="0"></field>
                            <field name="fixedPhotoNumber" label="" inputType="default" dataType="int"
                                   defaultValue="0"></field>
                            <field name="createDatetime" label="" inputType="default" dataType="datetime"
                                   defaultValue="${CURRENT_DATETIME}"></field>
                        </fields>
                    </page>
                </do>
                <do name="removePurchaseOrder" label="删除" result="json" access="delete"/>
                <do name="batchRemovePurchaseOrder"
                    result="json" access="delete">
                    <page>
                        <fields>
                            <field name="theStatus" defaultValue="0" dataType="int"></field>
                        </fields>
                    </page>
                </do>
                <do name="viewPurchaseOrder"
                    result="/manage/order/purchaseOrderView" access="view">
                    <page type="related"
                          label="支付信息"
                          url="/basic/xm.do?qm=plistPurchaseOrderPaymentByPurchaseOrder_default&amp;conditions=purchaseOrder.id:">
                    </page>

                </do>
                <do name="viewPurchaseOrder2"
                    result="/manage/order/purchaseOrderView2" access="view">

                </do>
                <do name="viewDesignerPurchaseOrder"
                    result="/manage/order/designerPurchaseOrderView" access="view"></do>

                <do name="plistPGPurchaseOrder" label="摄影师订单" result="/manage/order/relatePurchaseOrderList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="theStatus" label="状态" defaultValue="1" operation="eq"
                                   dataType="int"></condition>
                        <condition name="photographer.id" label="摄影师" defaultValue="" operation="eq"></condition>
                    </query>


                </do>

                <do name="formPurchaseOrder" label="新建/修改" result="/manage/order/purchaseOrderForm" access="new"/>


            </does>
        </entity>


        <entity name="PurchaseOrderPayment"
                label="支付记录" basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.PurchaseOrderPayment">
            <fields>
                <field name="purchaseOrder.id" label="订单" inputType="dialog_do" key="PurchaseOrderPayment.purchaseOrder"
                       reference="PurchaseOrder"/>
                <field name="payed" label="支付金额" inputType="text" dataType="BigDecimal"/>
                <field name="gateway" label="支付方式" inputType="select_status" dataType="int"
                       key="PurchaseOrderPayment.gateway">
                    <statusType fieldName="gateway">
                        <item label="现金" value="1"></item>
                        <item label="刷卡" value="2"></item>
                        <item label="支付宝" value="11"></item>
                        <item label="微信" value="21"></item>
                        <item label="财付通" value="4"></item>
                        <item label="其他" value="5"></item>
                    </statusType>
                </field>
                <field name="createDatetime" label="付款时间" inputType="text" dataType="datetime"/>
                <field name="user.id" label="用户" inputType="dialog_do" key="PurchaseOrderPayment.user"
                       reference="User"/>

            </fields>
            <does>
                <do name="plistPurchaseOrderPayment" label="支付记录"
                    result="/manage/order/purchaseOrderPaymentList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="id" inputType="default" defaultValue="" operation="ne"/>
                    </query>
                    <query name="basic" label="快速查询" orderBy="id:desc">
                        <condition name="purchaseOrder.serial" label="订单号" defaultValue="" inputType="text" operation="likes"></condition>
                    </query>
                </do>
                <do name="plistPurchaseOrderPaymentByPurchaseOrder"
                    label="支付信息"
                    result="xpagerelated" access="view">
                    <query type="auto" name="default" label="默认" orderBy="id:desc">
                        <condition label="订单" name="purchaseOrder.id" defaultValue="" operation="eq"
                                   inputType="default"/>
                    </query>

                    <page>
                        <fields>
                            <field name="alipay_trade_no" label="支付宝交易号" inputType="text"
                                   url="/basic/xm.do?qm=viewPurchaseOrderPayment&amp;id=${id}"/>
                            <field name="payed" label="金额" inputType="text" dataType="BigDecimal" defaultValue="0.0"/>

                            <field name="createDatetime" label="支付时间" inputType="text" dataType="datetime"/>
                        </fields>
                    </page>
                </do>

                <do name="viewPurchaseOrderPayment" label="支付详情" result="/manage/order/purchaseOrderPaymentView"
                    access="view"/>

            </does>
        </entity>

        <!--寄送信息-->
        <entity name="PurchaseOrderDelivery"
                label="寄送信息" basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.PurchaseOrderDelivery">
            <fields>
                <field name="photoFrameProvider.id" label="供应商" inputType="dialog_do"
                       key="PurchaseOrderDelivery.photoFrameProvider" reference="PhotoFrameProvider"/>
                <field name="purchaseOrder.id" label="订单" inputType="dialog_do"
                       key="PurchaseOrderDelivery.purchaseOrder" reference="PurchaseOrder"/>
                <field name="sendTime" label="发送时间" inputType="text" dataType="datetime"/>
            </fields>
            <does>
                <do name="plistPurchaseOrderDelivery" label="寄送信息"
                    result="/manage/order/purchaseOrderDeliveryList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="photoFrameProvider.id" label="供应商" defaultValue="${MY_USER}"
                                   operation="eq"></condition>
                    </query>

                </do>
            </does>
        </entity>

        <!--评价信息-->
        <entity name="PurchaseOrderComment"
                label="评价信息" basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.PurchaseOrderComment">
            <fields>
                <field name="purchaseOrder.id" label="订单" inputType="dialog_do" key="PurchaseOrderComment.purchaseOrder"
                       reference="PurchaseOrder"/>
                <field name="createDatetime" label="评价时间" inputType="text" dataType="datetime"/>
                <field name="user.id" label="用户" inputType="dialog_do" key="PurchaseOrderComment.user"
                       reference="User"/>
                <field name="photographer.id" label="摄影师" inputType="dialog_do" key="PurchaseOrderComment.photographer"
                       reference="User"/>
            </fields>
            <does>
                <do name="plistMnPurchaseOrderComment" label="所有评价信息" result="/manage/order/purchaseOrderCommentList"
                    access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="theStatus" label="状态" dataType="int" defaultValue="2" operation="eq"
                                   inputType="default"></condition>
                    </query>
                    <query name="advance" label="分类查找" orderBy="id:desc">
                        <condition name="theStatus" label="状态" dataType="int" defaultValue="2" operation="eq"
                                   inputType="default"></condition>
                        <condition name="createDatetime" label="起始时间" dataType="datetime" defaultValue="" operation="gt"
                                   inputType="date"></condition>
                        <condition name="createDatetime2" label="结束时间" dataType="datetime" defaultValue=""
                                   operation="lt" inputType="date"></condition>
                    </query>
                </do>
                <do name="plistDresserPurchaseOrderComment" label="化妆师评价"
                    result="/manage/order/purchaseOrderCommentList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="purchaseOrder.dresser.id" label="化妆师" defaultValue="${MY_USER}"
                                   operation="eq"></condition>
                    </query>
                </do>
                <do name="plistPgPurchaseOrderComment" label="摄影师评价"
                    result="/manage/order/relatePurchaseOrderCommentList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="photographer.id" label="摄影师" defaultValue="${MY_USER}"
                                   operation="eq"></condition>
                        <condition name="theStatus" label="状态" defaultValue="1" dataType="int" operation="eq"></condition>
                    </query>
                </do>
                <do name="removePurchaseOrderComment" label="假删" result="json" access="delete"/>
            </does>

        </entity>


        <entity name="Coupon" label="优惠劵"
                basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.Coupon">
            <fields>

                <field name="coupon_record_id" label="生成记录" inputType="dialog_do" key="Coupon.couponRecord"
                       reference="CouponRecord"></field>
                <field name="theStatus" label="优惠劵状态" dataType="int" key="Coupon.theStatus" inputType="select_status">
                    <statusType fieldName="theStatus">
                        <item label="未发放" value="1"></item>
                        <item label="已发放" value="2"></item>
                        <item label="已失效" value="3"></item>
                    </statusType>
                </field>
                <field name="consumerId" label="消费者" inputType="text"></field>
                <field name="consumeDate" label="消费日期" inputType="date" dataType="date"></field>

            </fields>
            <does>
                <do name="plistCoupon" label="优惠劵" result="/manage/order/couponList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="id" label="主键" defaultValue="" inputType="default" operation="ne"></condition>
                        <condition name="theStatus" label="状态" defaultValue="0" dataType="int"
                                   operation="gt"></condition>
                    </query>

                </do>
                <do name="formCoupon" label="新增" result="/manage/order/couponForm" access="new"/>
                <do name="removeCoupon" label="删除" result="json" access="delete"/>
                <do name="viewCoupon" label="详细" result="json" access="view"/>


            </does>
        </entity>

        <entity name="CouponRecord" label="优惠劵生成记录"
                basic="new,delete,edit,view" others=""
                model="com.yuepaila.order.model.CouponRecord">
            <fields>
                <field name="ptype" label="优惠劵类型" dataType="int" key="CouponRecord.ptype" inputType="select_status"
                       defaultValue="-1">
                    <statusType fieldName="ptype">
                        <item label="个人写真" value="1"></item>
                        <item label="婚纱摄影" value="2"></item>
                        <item label="母婴-孕妇照" value="111"></item>
                        <item label="母婴-百天照" value="112"></item>
                        <item label="母婴-儿童照" value="113"></item>
                        <item label="形象-证件照" value="211"></item>
                        <item label="形象-职场照" value="212"></item>
                        <item label="形象-商务肖像照" value="213"></item>
                        <item label="婚礼跟拍" value="311"></item>
                        <item label="旅游跟拍" value="312"></item>
                        <item label="会议跟拍" value="313"></item>
                    </statusType>
                </field>
                <field name="startDate" label="开始日期" dataType="date" inputType="date"></field>
                <field name="endDate" label="截止日期" dataType="date" inputType="date"></field>
                <field name="money" label="抵值金额" dataType="BigDecimal" inputType="text"></field>
                <field name="createDatetime" label="生成时间" dataType="date" inputType="text"></field>
                <field name="createUser.id" label="创建者" inputType="dialog_do" key="CouponRecord.createUser"
                       reference="User"></field>
            </fields>
            <does>
                <do name="plistCouponRecord" label="优惠劵生成记录"
                    execute="com.yuepaila.order.controller.CouponRecordListHandler"
                    result="/manage/order/couponRecordList" access="view">
                    <query name="default" label="默认" type="auto" orderBy="id:desc">
                        <condition name="id" label="主键" defaultValue="" inputType="default" operation="ne"></condition>
                    </query>
                </do>
                <do name="formCouponRecord" label="新增" result="/manage/order/couponRecordForm" access="new"/>
                <do name="saveOrUpdateCouponRecord" label="保存"
                    execute="com.yuepaila.order.controller.CouponRecordHandler"
                    result="redirect:/basic/xm.do?qm=plistCouponRecord_default">
                    <page>
                        <fields>
                            <field name="createUser" label="创建者" defaultValue="${MY_USER}" inputType="default"></field>
                            <field name="createDatetime" label="生成时间" defaultValue="${CURRENT_DATE}" dataType="datetime"
                                   inputType="default"></field>
                        </fields>
                    </page>
                </do>

            </does>
        </entity>

    </entities>


</module>
